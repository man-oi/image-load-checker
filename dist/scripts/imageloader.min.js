var Imageloader=window.Imageloader||{};Imageloader=function(){"use strict";function e(e){var t={};t.defaults={imageSelector:"img",timeoutTime:6e4,imageLoaded:function(e){e.classList.add("loaded")},imageLoadedAfterTimeout:function(e){e.classList.add("loaded")},imageError:function(e){e.classList.add("error")},imageErrorAfterTimeout:function(e){e.classList.add("error")},imageTimeout:function(e){}},t.options={},t.imageElements=null,t.timeoutFunctions=[],t.timeouts=[],t.loadedImages=0,t.errorImages=0,t.timeoutImages=0,t.init=function(){void 0===e&&(e={}),t.extend(t.options,t.defaults,e),t.imageElements=document.querySelectorAll(t.options.imageSelector),t.bindEvents()},t.bindEvents=function(){for(var e=document.createEvent("HTMLEvents"),o=0;o<t.imageElements.length;o++)t.imageElements[o].addEventListener("load",t.loaded),t.imageElements[o].addEventListener("error",t.error),t.timeoutFunctions[o]=window.setTimeout(function(e){t.timeout(t.imageElements[e])},t.options.timeoutTime,o),t.timeouts[o]=!1,t.imageElements[o].complete&&(0===t.imageElements[o].naturalWidth?e.initEvent("error",!0,!0):e.initEvent("load",!0,!0),t.imageElements[o].dispatchEvent(e))},t.loaded=function(e){var o=e.target,i=Array.prototype.slice.call(t.imageElements).indexOf(o);window.clearTimeout(t.timeoutFunctions[i]),o.removeEventListener("load",t.loaded),t.timeouts[i]?t.options.imageLoadedAfterTimeout(o):(t.loadedImages++,t.options.imageLoaded(o),t.loadedImages+t.errorImages+t.timeoutImages===t.imageElements.length&&(t.loadedImages===t.imageElements.length?t.allLoaded():t.notAllLoaded()))},t.error=function(e){var o=e.target,i=Array.prototype.slice.call(t.imageElements).indexOf(o);window.clearTimeout(t.timeoutFunctions[i]),o.removeEventListener("error",t.error),t.timeouts[i]?t.options.imageErrorAfterTimeout(o):(t.errorImages++,t.options.imageError(o),t.loadedImages+t.errorImages+t.timeoutImages===t.imageElements.length&&(t.errorImages===t.imageElements.length?t.allFails():t.notAllLoaded()))},t.timeout=function(e){var o=Array.prototype.slice.call(t.imageElements).indexOf(e);t.timeouts[o]=!0,t.timeoutImages++,t.options.imageTimeout(e),t.loadedImages+t.errorImages+t.timeoutImages===t.imageElements.length&&(t.errorImages===t.imageElements.length?t.allFails():t.notAllLoaded())},t.allFails=function(){},t.allLoaded=function(){},t.notAllLoaded=function(){},t.extend=function(e,t,o){for(var i in t)o[i]?e[i]=o[i]:e[i]=t[i];return e},t.init()}return e}();